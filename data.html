<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Consulta de RUC SRI</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    input[type="text"] { padding: 6px; width: 250px; margin-top: 10px; }
    button { padding: 6px 10px; margin-left: 10px; }
  </style>
</head>
<body>
  <h1>Información del RUC</h1>

  <label for="rucInput">Ingrese RUC:</label>
  <input type="text" id="rucInput" placeholder="Ej. 1707770622001" />
  <button onclick="consultarRuc()">Consultar</button>

  <table id="tablaRuc">
    <thead>
      <tr><th>Campo</th><th>Valor</th></tr>
    </thead>
    <tbody id="resultado">
      <tr><td colspan="2">Esperando consulta...</td></tr>
    </tbody>
  </table>

  <script>
    function consultarRuc() {
      const ruc = document.getElementById("rucInput").value.trim();
      const resultado = document.getElementById("resultado");

      if (!ruc || ruc.length < 10) {
        resultado.innerHTML = `<tr><td colspan='2'>Ingrese un RUC válido.</td></tr>`;
        return;
      }

      resultado.innerHTML = `<tr><td colspan='2'>Consultando...</td></tr>`;

      fetch(`https://siturin.turismo.gob.ec:8443/public/api/v1/public/dinardap/sri/${ruc}`)
        .then(response => {
          if (!response.ok) {
            throw new Error("Error en la consulta: " + response.status);
          }
          return response.json();
        })
        .then(data => {
          resultado.innerHTML = "";

          const info = data.data;
          for (const campo in info) {
            if (info[campo] !== null && info[campo] !== "") {
              const row = `<tr><td>${campo}</td><td>${info[campo]}</td></tr>`;
              resultado.innerHTML += row;
            }
          }
        })
        .catch(error => {
          resultado.innerHTML = `<tr><td colspan='2'>Error: ${error}</td></tr>`;
        });
    }
  </script>
</body>
</html>
